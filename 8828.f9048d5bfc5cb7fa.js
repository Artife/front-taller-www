"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8828],{8828:($t,Z,y)=>{y.r(Z),y.d(Z,{NuevaOrdenPageModule:()=>Mt});var H=y(177),b=y(4341),f=y(4742),tt=y(6766),u=y(467);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var R=function(a){return a.Unimplemented="UNIMPLEMENTED",a.Unavailable="UNAVAILABLE",a}(R||{});class F extends Error{constructor(t,e,n){super(t),this.message=t,this.code=e,this.data=n}}const ht=a=>{var t,e,n,i,r;const o=a.CapacitorCustomPlatform||null,l=a.Capacitor||{},d=l.Plugins=l.Plugins||{},c=a.CapacitorPlatforms,m=(null===(t=null==c?void 0:c.currentPlatform)||void 0===t?void 0:t.getPlatform)||(()=>null!==o?o.name:(a=>{var t,e;return null!=a&&a.androidBridge?"android":null!==(e=null===(t=null==a?void 0:a.webkit)||void 0===t?void 0:t.messageHandlers)&&void 0!==e&&e.bridge?"ios":"web"})(a)),C=(null===(e=null==c?void 0:c.currentPlatform)||void 0===e?void 0:e.isNativePlatform)||(()=>"web"!==m()),O=(null===(n=null==c?void 0:c.currentPlatform)||void 0===n?void 0:n.isPluginAvailable)||(p=>{const g=q.get(p);return!!(null!=g&&g.platforms.has(m())||j(p))}),j=(null===(i=null==c?void 0:c.currentPlatform)||void 0===i?void 0:i.getPluginHeader)||(p=>{var g;return null===(g=l.PluginHeaders)||void 0===g?void 0:g.find(I=>I.name===p)}),q=new Map,Ut=(null===(r=null==c?void 0:c.currentPlatform)||void 0===r?void 0:r.registerPlugin)||((p,g={})=>{const I=q.get(p);if(I)return console.warn(`Capacitor plugin "${p}" already registered. Cannot register plugins twice.`),I.proxy;const S=m(),N=j(p);let A;const jt=function(){var v=(0,u.A)(function*(){return!A&&S in g?A=A="function"==typeof g[S]?yield g[S]():g[S]:null!==o&&!A&&"web"in g&&(A=A="function"==typeof g.web?yield g.web():g.web),A});return function(){return v.apply(this,arguments)}}(),J=v=>{let P;const x=(...L)=>{const k=jt().then(w=>{const T=((v,P)=>{var x,L;if(!N){if(v)return null===(L=v[P])||void 0===L?void 0:L.bind(v);throw new F(`"${p}" plugin is not implemented on ${S}`,R.Unimplemented)}{const k=null==N?void 0:N.methods.find(w=>P===w.name);if(k)return"promise"===k.rtype?w=>l.nativePromise(p,P.toString(),w):(w,T)=>l.nativeCallback(p,P.toString(),w,T);if(v)return null===(x=v[P])||void 0===x?void 0:x.bind(v)}})(w,v);if(T){const V=T(...L);return P=null==V?void 0:V.remove,V}throw new F(`"${p}.${v}()" is not implemented on ${S}`,R.Unimplemented)});return"addListener"===v&&(k.remove=(0,u.A)(function*(){return P()})),k};return x.toString=()=>`${v.toString()}() { [capacitor code] }`,Object.defineProperty(x,"name",{value:v,writable:!1,configurable:!1}),x},at=J("addListener"),lt=J("removeListener"),Wt=(v,P)=>{const x=at({eventName:v},P),L=function(){var w=(0,u.A)(function*(){const T=yield x;lt({eventName:v,callbackId:T},P)});return function(){return w.apply(this,arguments)}}(),k=new Promise(w=>x.then(()=>w({remove:L})));return k.remove=(0,u.A)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield L()}),k},Q=new Proxy({},{get(v,P){switch(P){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return N?Wt:at;case"removeListener":return lt;default:return J(P)}}});return d[p]=Q,q.set(p,{name:p,proxy:Q,platforms:new Set([...Object.keys(g),...N?[S]:[]])}),Q});return l.convertFileSrc||(l.convertFileSrc=p=>p),l.getPlatform=m,l.handleError=p=>a.console.error(p),l.isNativePlatform=C,l.isPluginAvailable=O,l.pluginMethodNoop=(p,g,I)=>Promise.reject(`${I} does not have an implementation of "${g}".`),l.registerPlugin=Ut,l.Exception=F,l.DEBUG=!!l.DEBUG,l.isLoggingEnabled=!!l.isLoggingEnabled,l.platform=l.getPlatform(),l.isNative=l.isNativePlatform(),l},U=(a=>a.Capacitor=ht(a))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),z=U.registerPlugin;class K{constructor(t){this.listeners={},this.retainedEventArguments={},this.windowListeners={},t&&(console.warn(`Capacitor WebPlugin "${t.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=t)}addListener(t,e){var n=this;let i=!1;this.listeners[t]||(this.listeners[t]=[],i=!0),this.listeners[t].push(e);const o=this.windowListeners[t];o&&!o.registered&&this.addWindowListener(o),i&&this.sendRetainedArgumentsForEvent(t);const l=function(){var c=(0,u.A)(function*(){return n.removeListener(t,e)});return function(){return c.apply(this,arguments)}}();return Promise.resolve({remove:l})}removeAllListeners(){var t=this;return(0,u.A)(function*(){t.listeners={};for(const e in t.windowListeners)t.removeWindowListener(t.windowListeners[e]);t.windowListeners={}})()}notifyListeners(t,e,n){const i=this.listeners[t];if(i)i.forEach(r=>r(e));else if(n){let r=this.retainedEventArguments[t];r||(r=[]),r.push(e),this.retainedEventArguments[t]=r}}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,e){this.windowListeners[e]={registered:!1,windowEventName:t,pluginEventName:e,handler:n=>{this.notifyListeners(e,n)}}}unimplemented(t="not implemented"){return new U.Exception(t,R.Unimplemented)}unavailable(t="not available"){return new U.Exception(t,R.Unavailable)}removeListener(t,e){var n=this;return(0,u.A)(function*(){const i=n.listeners[t];if(!i)return;const r=i.indexOf(e);n.listeners[t].splice(r,1),n.listeners[t].length||n.removeWindowListener(n.windowListeners[t])})()}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const e=this.retainedEventArguments[t];e&&(delete this.retainedEventArguments[t],e.forEach(n=>{this.notifyListeners(t,n)}))}}const nt=a=>encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),it=a=>a.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class mt extends K{getCookies(){return(0,u.A)(function*(){const t=document.cookie,e={};return t.split(";").forEach(n=>{if(n.length<=0)return;let[i,r]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=it(i).trim(),r=it(r).trim(),e[i]=r}),e})()}setCookie(t){return(0,u.A)(function*(){try{const e=nt(t.key),n=nt(t.value),i=`; expires=${(t.expires||"").replace("expires=","")}`,r=(t.path||"/").replace("path=",""),o=null!=t.url&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${e}=${n||""}${i}; path=${r}; ${o};`}catch(e){return Promise.reject(e)}})()}deleteCookie(t){return(0,u.A)(function*(){try{document.cookie=`${t.key}=; Max-Age=0`}catch(e){return Promise.reject(e)}})()}clearCookies(){return(0,u.A)(function*(){try{const t=document.cookie.split(";")||[];for(const e of t)document.cookie=e.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(t){return Promise.reject(t)}})()}clearAllCookies(){var t=this;return(0,u.A)(function*(){try{yield t.clearCookies()}catch(e){return Promise.reject(e)}})()}}z("CapacitorCookies",{web:()=>new mt});const ft=function(){var a=(0,u.A)(function*(t){return new Promise((e,n)=>{const i=new FileReader;i.onload=()=>{const r=i.result;e(r.indexOf(",")>=0?r.split(",")[1]:r)},i.onerror=r=>n(r),i.readAsDataURL(t)})});return function(e){return a.apply(this,arguments)}}();class bt extends K{request(t){return(0,u.A)(function*(){const e=((a,t={})=>{const e=Object.assign({method:a.method||"GET",headers:a.headers},t),i=((a={})=>{const t=Object.keys(a);return Object.keys(a).map(i=>i.toLocaleLowerCase()).reduce((i,r,o)=>(i[r]=a[t[o]],i),{})})(a.headers)["content-type"]||"";if("string"==typeof a.data)e.body=a.data;else if(i.includes("application/x-www-form-urlencoded")){const r=new URLSearchParams;for(const[o,l]of Object.entries(a.data||{}))r.set(o,l);e.body=r.toString()}else if(i.includes("multipart/form-data")||a.data instanceof FormData){const r=new FormData;if(a.data instanceof FormData)a.data.forEach((l,d)=>{r.append(d,l)});else for(const l of Object.keys(a.data))r.append(l,a.data[l]);e.body=r;const o=new Headers(e.headers);o.delete("content-type"),e.headers=o}else(i.includes("application/json")||"object"==typeof a.data)&&(e.body=JSON.stringify(a.data));return e})(t,t.webFetchExtra),n=((a,t=!0)=>a?Object.entries(a).reduce((n,i)=>{const[r,o]=i;let l,d;return Array.isArray(o)?(d="",o.forEach(c=>{l=t?encodeURIComponent(c):c,d+=`${r}=${l}&`}),d.slice(0,-1)):(l=t?encodeURIComponent(o):o,d=`${r}=${l}`),`${n}&${d}`},"").substr(1):null)(t.params,t.shouldEncodeUrlParams),i=n?`${t.url}?${n}`:t.url,r=yield fetch(i,e),o=r.headers.get("content-type")||"";let d,c,{responseType:l="text"}=r.ok?t:{};switch(o.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":c=yield r.blob(),d=yield ft(c);break;case"json":d=yield r.json();break;default:d=yield r.text()}const h={};return r.headers.forEach((m,E)=>{h[E]=m}),{data:d,headers:h,status:r.status,url:r.url}})()}get(t){var e=this;return(0,u.A)(function*(){return e.request(Object.assign(Object.assign({},t),{method:"GET"}))})()}post(t){var e=this;return(0,u.A)(function*(){return e.request(Object.assign(Object.assign({},t),{method:"POST"}))})()}put(t){var e=this;return(0,u.A)(function*(){return e.request(Object.assign(Object.assign({},t),{method:"PUT"}))})()}patch(t){var e=this;return(0,u.A)(function*(){return e.request(Object.assign(Object.assign({},t),{method:"PATCH"}))})()}delete(t){var e=this;return(0,u.A)(function*(){return e.request(Object.assign(Object.assign({},t),{method:"DELETE"}))})()}}z("CapacitorHttp",{web:()=>new bt});var M=function(a){return a.Prompt="PROMPT",a.Camera="CAMERA",a.Photos="PHOTOS",a}(M||{}),D=function(a){return a.Rear="REAR",a.Front="FRONT",a}(D||{}),rt=function(a){return a.Uri="uri",a.Base64="base64",a.DataUrl="dataUrl",a}(rt||{});class ot extends K{getPhoto(t){var e=this;return(0,u.A)(function*(){return new Promise(function(){var n=(0,u.A)(function*(i,r){if(t.webUseInput||t.source===M.Photos)e.fileInputExperience(t,i,r);else if(t.source===M.Prompt){let o=document.querySelector("pwa-action-sheet");o||(o=document.createElement("pwa-action-sheet"),document.body.appendChild(o)),o.header=t.promptLabelHeader||"Photo",o.cancelable=!1,o.options=[{title:t.promptLabelPhoto||"From Photos"},{title:t.promptLabelPicture||"Take Picture"}],o.addEventListener("onSelection",function(){var l=(0,u.A)(function*(d){0===d.detail?e.fileInputExperience(t,i,r):e.cameraExperience(t,i,r)});return function(d){return l.apply(this,arguments)}}())}else e.cameraExperience(t,i,r)});return function(i,r){return n.apply(this,arguments)}}())})()}pickImages(t){var e=this;return(0,u.A)(function*(){return new Promise(function(){var n=(0,u.A)(function*(i,r){e.multipleFileInputExperience(i,r)});return function(i,r){return n.apply(this,arguments)}}())})()}cameraExperience(t,e,n){var i=this;return(0,u.A)(function*(){if(customElements.get("pwa-camera-modal")){const r=document.createElement("pwa-camera-modal");r.facingMode=t.direction===D.Front?"user":"environment",document.body.appendChild(r);try{yield r.componentOnReady(),r.addEventListener("onPhoto",function(){var o=(0,u.A)(function*(l){const d=l.detail;null===d?n(new F("User cancelled photos app")):d instanceof Error?n(d):e(yield i._getCameraPhoto(d,t)),r.dismiss(),document.body.removeChild(r)});return function(l){return o.apply(this,arguments)}}()),r.present()}catch{i.fileInputExperience(t,e,n)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),i.fileInputExperience(t,e,n)})()}fileInputExperience(t,e,n){let i=document.querySelector("#_capacitor-camera-input");const r=()=>{var o;null===(o=i.parentNode)||void 0===o||o.removeChild(i)};i||(i=document.createElement("input"),i.id="_capacitor-camera-input",i.type="file",i.hidden=!0,document.body.appendChild(i),i.addEventListener("change",o=>{const l=i.files[0];let d="jpeg";if("image/png"===l.type?d="png":"image/gif"===l.type&&(d="gif"),"dataUrl"===t.resultType||"base64"===t.resultType){const c=new FileReader;c.addEventListener("load",()=>{if("dataUrl"===t.resultType)e({dataUrl:c.result,format:d});else if("base64"===t.resultType){const h=c.result.split(",")[1];e({base64String:h,format:d})}r()}),c.readAsDataURL(l)}else e({webPath:URL.createObjectURL(l),format:d}),r()}),i.addEventListener("cancel",o=>{n(new F("User cancelled photos app")),r()})),i.accept="image/*",i.capture=!0,t.source===M.Photos||t.source===M.Prompt?i.removeAttribute("capture"):t.direction===D.Front?i.capture="user":t.direction===D.Rear&&(i.capture="environment"),i.click()}multipleFileInputExperience(t,e){let n=document.querySelector("#_capacitor-camera-input-multiple");const i=()=>{var r;null===(r=n.parentNode)||void 0===r||r.removeChild(n)};n||(n=document.createElement("input"),n.id="_capacitor-camera-input-multiple",n.type="file",n.hidden=!0,n.multiple=!0,document.body.appendChild(n),n.addEventListener("change",r=>{const o=[];for(let l=0;l<n.files.length;l++){const d=n.files[l];let c="jpeg";"image/png"===d.type?c="png":"image/gif"===d.type&&(c="gif"),o.push({webPath:URL.createObjectURL(d),format:c})}t({photos:o}),i()}),n.addEventListener("cancel",r=>{e(new F("User cancelled photos app")),i()})),n.accept="image/*",n.click()}_getCameraPhoto(t,e){return new Promise((n,i)=>{const r=new FileReader,o=t.type.split("/")[1];"uri"===e.resultType?n({webPath:URL.createObjectURL(t),format:o,saved:!1}):(r.readAsDataURL(t),r.onloadend=()=>{const l=r.result;n("dataUrl"===e.resultType?{dataUrl:l,format:o,saved:!1}:{base64String:l.split(",")[1],format:o,saved:!1})},r.onerror=l=>{i(l)})})}checkPermissions(){var t=this;return(0,u.A)(function*(){if(typeof navigator>"u"||!navigator.permissions)throw t.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw t.unavailable("Camera permissions are not available in this browser")}})()}requestPermissions(){var t=this;return(0,u.A)(function*(){throw t.unimplemented("Not implemented on web.")})()}pickLimitedLibraryPhotos(){var t=this;return(0,u.A)(function*(){throw t.unavailable("Not implemented on web.")})()}getLimitedLibraryPhotos(){var t=this;return(0,u.A)(function*(){throw t.unavailable("Not implemented on web.")})()}}new ot;const _t=z("Camera",{web:()=>new ot});class W{constructor(t,e,n,i){if(isNaN(t)||isNaN(e))throw new Error(`Point is invalid: (${t}, ${e})`);this.x=+t,this.y=+e,this.pressure=n||0,this.time=i||Date.now()}distanceTo(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}equals(t){return this.x===t.x&&this.y===t.y&&this.pressure===t.pressure&&this.time===t.time}velocityFrom(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):0}}class Y{static fromPoints(t,e){const n=this.calculateControlPoints(t[0],t[1],t[2]).c2,i=this.calculateControlPoints(t[1],t[2],t[3]).c1;return new Y(t[1],n,i,t[2],e.start,e.end)}static calculateControlPoints(t,e,n){const i=t.x-e.x,r=t.y-e.y,o=e.x-n.x,l=e.y-n.y,d_x=(t.x+e.x)/2,d_y=(t.y+e.y)/2,c_x=(e.x+n.x)/2,c_y=(e.y+n.y)/2,h=Math.sqrt(i*i+r*r),m=Math.sqrt(o*o+l*l),_=h+m==0?0:m/(h+m),G=e.x-(c_x+(d_x-c_x)*_),j=e.y-(c_y+(d_y-c_y)*_);return{c1:new W(d_x+G,d_y+j),c2:new W(c_x+G,c_y+j)}}constructor(t,e,n,i,r,o){this.startPoint=t,this.control2=e,this.control1=n,this.endPoint=i,this.startWidth=r,this.endWidth=o}length(){let n,i,e=0;for(let r=0;r<=10;r+=1){const o=r/10,l=this.point(o,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),d=this.point(o,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(r>0){const c=l-n,h=d-i;e+=Math.sqrt(c*c+h*h)}n=l,i=d}return e}point(t,e,n,i,r){return e*(1-t)*(1-t)*(1-t)+3*n*(1-t)*(1-t)*t+3*i*(1-t)*t*t+r*t*t*t}}class Pt{constructor(){try{this._et=new EventTarget}catch{this._et=document}}addEventListener(t,e,n){this._et.addEventListener(t,e,n)}dispatchEvent(t){return this._et.dispatchEvent(t)}removeEventListener(t,e,n){this._et.removeEventListener(t,e,n)}}class $ extends Pt{constructor(t,e={}){var n,i,r;super(),this.canvas=t,this._drawingStroke=!1,this._isEmpty=!0,this._lastPoints=[],this._data=[],this._lastVelocity=0,this._lastWidth=0,this._handleMouseDown=o=>{!this._isLeftButtonPressed(o,!0)||this._drawingStroke||this._strokeBegin(this._pointerEventToSignatureEvent(o))},this._handleMouseMove=o=>{this._isLeftButtonPressed(o,!0)&&this._drawingStroke?this._strokeMoveUpdate(this._pointerEventToSignatureEvent(o)):this._strokeEnd(this._pointerEventToSignatureEvent(o),!1)},this._handleMouseUp=o=>{this._isLeftButtonPressed(o)||this._strokeEnd(this._pointerEventToSignatureEvent(o))},this._handleTouchStart=o=>{1!==o.targetTouches.length||this._drawingStroke||(o.cancelable&&o.preventDefault(),this._strokeBegin(this._touchEventToSignatureEvent(o)))},this._handleTouchMove=o=>{if(1===o.targetTouches.length){if(o.cancelable&&o.preventDefault(),!this._drawingStroke)return void this._strokeEnd(this._touchEventToSignatureEvent(o),!1);this._strokeMoveUpdate(this._touchEventToSignatureEvent(o))}},this._handleTouchEnd=o=>{0===o.targetTouches.length&&(o.cancelable&&o.preventDefault(),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this._strokeEnd(this._touchEventToSignatureEvent(o)))},this._handlePointerDown=o=>{!o.isPrimary||!this._isLeftButtonPressed(o)||this._drawingStroke||(o.preventDefault(),this._strokeBegin(this._pointerEventToSignatureEvent(o)))},this._handlePointerMove=o=>{if(o.isPrimary){if(!this._isLeftButtonPressed(o,!0)||!this._drawingStroke)return void this._strokeEnd(this._pointerEventToSignatureEvent(o),!1);o.preventDefault(),this._strokeMoveUpdate(this._pointerEventToSignatureEvent(o))}},this._handlePointerUp=o=>{!o.isPrimary||this._isLeftButtonPressed(o)||(o.preventDefault(),this._strokeEnd(this._pointerEventToSignatureEvent(o)))},this.velocityFilterWeight=e.velocityFilterWeight||.7,this.minWidth=e.minWidth||.5,this.maxWidth=e.maxWidth||2.5,this.throttle=null!==(n=e.throttle)&&void 0!==n?n:16,this.minDistance=null!==(i=e.minDistance)&&void 0!==i?i:5,this.dotSize=e.dotSize||0,this.penColor=e.penColor||"black",this.backgroundColor=e.backgroundColor||"rgba(0,0,0,0)",this.compositeOperation=e.compositeOperation||"source-over",this.canvasContextOptions=null!==(r=e.canvasContextOptions)&&void 0!==r?r:{},this._strokeMoveUpdate=this.throttle?function yt(a,t=250){let i,r,o,e=0,n=null;const l=()=>{e=Date.now(),n=null,i=a.apply(r,o),n||(r=null,o=[])};return function(...c){const h=Date.now(),m=t-(h-e);return r=this,o=c,m<=0||m>t?(n&&(clearTimeout(n),n=null),e=h,i=a.apply(r,o),n||(r=null,o=[])):n||(n=window.setTimeout(l,m)),i}}($.prototype._strokeUpdate,this.throttle):$.prototype._strokeUpdate,this._ctx=t.getContext("2d",this.canvasContextOptions),this.clear(),this.on()}clear(){const{_ctx:t,canvas:e}=this;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(this._getPointGroupOptions()),this._isEmpty=!0}fromDataURL(t,e={}){return new Promise((n,i)=>{const r=new Image,o=e.ratio||window.devicePixelRatio||1,l=e.width||this.canvas.width/o,d=e.height||this.canvas.height/o,c=e.xOffset||0,h=e.yOffset||0;this._reset(this._getPointGroupOptions()),r.onload=()=>{this._ctx.drawImage(r,c,h,l,d),n()},r.onerror=m=>{i(m)},r.crossOrigin="anonymous",r.src=t,this._isEmpty=!1})}toDataURL(t="image/png",e){return"image/svg+xml"===t?("object"!=typeof e&&(e=void 0),`data:image/svg+xml;base64,${btoa(this.toSVG(e))}`):("number"!=typeof e&&(e=void 0),this.canvas.toDataURL(t,e))}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none";const t=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!t?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerDown),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this._removeMoveUpEventListeners()}_getListenerFunctions(){var t;const e=window.document===this.canvas.ownerDocument?window:null!==(t=this.canvas.ownerDocument.defaultView)&&void 0!==t?t:this.canvas.ownerDocument;return{addEventListener:e.addEventListener.bind(e),removeEventListener:e.removeEventListener.bind(e)}}_removeMoveUpEventListeners(){const{removeEventListener:t}=this._getListenerFunctions();t("pointermove",this._handlePointerMove),t("pointerup",this._handlePointerUp),t("mousemove",this._handleMouseMove),t("mouseup",this._handleMouseUp),t("touchmove",this._handleTouchMove),t("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(t,{clear:e=!0}={}){e&&this.clear(),this._fromData(t,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(t)}toData(){return this._data}_isLeftButtonPressed(t,e){return e?1===t.buttons:!(1&~t.buttons)}_pointerEventToSignatureEvent(t){return{event:t,type:t.type,x:t.clientX,y:t.clientY,pressure:"pressure"in t?t.pressure:0}}_touchEventToSignatureEvent(t){const e=t.changedTouches[0];return{event:t,type:t.type,x:e.clientX,y:e.clientY,pressure:e.force}}_getPointGroupOptions(t){return{penColor:t&&"penColor"in t?t.penColor:this.penColor,dotSize:t&&"dotSize"in t?t.dotSize:this.dotSize,minWidth:t&&"minWidth"in t?t.minWidth:this.minWidth,maxWidth:t&&"maxWidth"in t?t.maxWidth:this.maxWidth,velocityFilterWeight:t&&"velocityFilterWeight"in t?t.velocityFilterWeight:this.velocityFilterWeight,compositeOperation:t&&"compositeOperation"in t?t.compositeOperation:this.compositeOperation}}_strokeBegin(t){if(!this.dispatchEvent(new CustomEvent("beginStroke",{detail:t,cancelable:!0})))return;const{addEventListener:n}=this._getListenerFunctions();switch(t.event.type){case"mousedown":n("mousemove",this._handleMouseMove),n("mouseup",this._handleMouseUp);break;case"touchstart":n("touchmove",this._handleTouchMove),n("touchend",this._handleTouchEnd);break;case"pointerdown":n("pointermove",this._handlePointerMove),n("pointerup",this._handlePointerUp)}this._drawingStroke=!0;const i=this._getPointGroupOptions(),r=Object.assign(Object.assign({},i),{points:[]});this._data.push(r),this._reset(i),this._strokeUpdate(t)}_strokeUpdate(t){if(!this._drawingStroke)return;if(0===this._data.length)return void this._strokeBegin(t);this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:t}));const e=this._createPoint(t.x,t.y,t.pressure),n=this._data[this._data.length-1],i=n.points,r=i.length>0&&i[i.length-1],o=!!r&&e.distanceTo(r)<=this.minDistance,l=this._getPointGroupOptions(n);if(!r||!r||!o){const d=this._addPoint(e,l);r?d&&this._drawCurve(d,l):this._drawDot(e,l),i.push({time:e.time,x:e.x,y:e.y,pressure:e.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:t}))}_strokeEnd(t,e=!0){this._removeMoveUpEventListeners(),this._drawingStroke&&(e&&this._strokeUpdate(t),this._drawingStroke=!1,this.dispatchEvent(new CustomEvent("endStroke",{detail:t})))}_handlePointerEvents(){this._drawingStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerDown)}_handleMouseEvents(){this._drawingStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown)}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart)}_reset(t){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(t.minWidth+t.maxWidth)/2,this._ctx.fillStyle=t.penColor,this._ctx.globalCompositeOperation=t.compositeOperation}_createPoint(t,e,n){const i=this.canvas.getBoundingClientRect();return new W(t-i.left,e-i.top,n,(new Date).getTime())}_addPoint(t,e){const{_lastPoints:n}=this;if(n.push(t),n.length>2){3===n.length&&n.unshift(n[0]);const i=this._calculateCurveWidths(n[1],n[2],e),r=Y.fromPoints(n,i);return n.shift(),r}return null}_calculateCurveWidths(t,e,n){const i=n.velocityFilterWeight*e.velocityFrom(t)+(1-n.velocityFilterWeight)*this._lastVelocity,r=this._strokeWidth(i,n),o={end:r,start:this._lastWidth};return this._lastVelocity=i,this._lastWidth=r,o}_strokeWidth(t,e){return Math.max(e.maxWidth/(t+1),e.minWidth)}_drawCurveSegment(t,e,n){const i=this._ctx;i.moveTo(t,e),i.arc(t,e,n,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(t,e){const n=this._ctx,i=t.endWidth-t.startWidth,r=2*Math.ceil(t.length());n.beginPath(),n.fillStyle=e.penColor;for(let o=0;o<r;o+=1){const l=o/r,d=l*l,c=d*l,h=1-l,m=h*h,E=m*h;let C=E*t.startPoint.x;C+=3*m*l*t.control1.x,C+=3*h*d*t.control2.x,C+=c*t.endPoint.x;let _=E*t.startPoint.y;_+=3*m*l*t.control1.y,_+=3*h*d*t.control2.y,_+=c*t.endPoint.y;const O=Math.min(t.startWidth+c*i,e.maxWidth);this._drawCurveSegment(C,_,O)}n.closePath(),n.fill()}_drawDot(t,e){const n=this._ctx,i=e.dotSize>0?e.dotSize:(e.minWidth+e.maxWidth)/2;n.beginPath(),this._drawCurveSegment(t.x,t.y,i),n.closePath(),n.fillStyle=e.penColor,n.fill()}_fromData(t,e,n){for(const i of t){const{points:r}=i,o=this._getPointGroupOptions(i);if(r.length>1)for(let l=0;l<r.length;l+=1){const d=r[l],c=new W(d.x,d.y,d.pressure,d.time);0===l&&this._reset(o);const h=this._addPoint(c,o);h&&e(h,o)}else this._reset(o),n(r[0],o)}}toSVG({includeBackgroundColor:t=!1}={}){const e=this._data,n=Math.max(window.devicePixelRatio||1,1),o=this.canvas.width/n,l=this.canvas.height/n,d=document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.setAttribute("xmlns","http://www.w3.org/2000/svg"),d.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),d.setAttribute("viewBox",`0 0 ${o} ${l}`),d.setAttribute("width",o.toString()),d.setAttribute("height",l.toString()),t&&this.backgroundColor){const c=document.createElement("rect");c.setAttribute("width","100%"),c.setAttribute("height","100%"),c.setAttribute("fill",this.backgroundColor),d.appendChild(c)}return this._fromData(e,(c,{penColor:h})=>{const m=document.createElement("path");if(!(isNaN(c.control1.x)||isNaN(c.control1.y)||isNaN(c.control2.x)||isNaN(c.control2.y))){const E=`M ${c.startPoint.x.toFixed(3)},${c.startPoint.y.toFixed(3)} C ${c.control1.x.toFixed(3)},${c.control1.y.toFixed(3)} ${c.control2.x.toFixed(3)},${c.control2.y.toFixed(3)} ${c.endPoint.x.toFixed(3)},${c.endPoint.y.toFixed(3)}`;m.setAttribute("d",E),m.setAttribute("stroke-width",(2.25*c.endWidth).toFixed(3)),m.setAttribute("stroke",h),m.setAttribute("fill","none"),m.setAttribute("stroke-linecap","round"),d.appendChild(m)}},(c,{penColor:h,dotSize:m,minWidth:E,maxWidth:C})=>{const _=document.createElement("circle");_.setAttribute("r",(m>0?m:(E+C)/2).toString()),_.setAttribute("cx",c.x.toString()),_.setAttribute("cy",c.y.toString()),_.setAttribute("fill",h),d.appendChild(_)}),d.outerHTML}}var s=y(4438),B=y(1626),X=y(5312),st=y(9077);let Et=(()=>{var a;class t{constructor(n,i){this.http=n,this.authService=i,this.apiUrl=X.c.apiUrl}nuevaOrden(n){const i=this.authService.getToken(),r=new B.Lr({"Content-Type":"application/json",Authorization:`Bearer ${i}`});return this.http.post(`${this.apiUrl}/nueva-orden`,n,{headers:r})}}return(a=t).\u0275fac=function(n){return new(n||a)(s.KVO(B.Qq),s.KVO(st.u))},a.\u0275prov=s.jDH({token:a,factory:a.\u0275fac,providedIn:"root"}),t})(),wt=(()=>{var a;class t{constructor(n,i){this.http=n,this.authService=i}getListado(){const n=this.authService.getToken(),i=new B.Lr({"Content-Type":"application/json",Authorization:`Bearer ${n}`});return this.http.post(X.c.apiUrl+X.c.lopdgdd,{headers:i})}}return(a=t).\u0275fac=function(n){return new(n||a)(s.KVO(B.Qq),s.KVO(st.u))},a.\u0275prov=s.jDH({token:a,factory:a.\u0275fac,providedIn:"root"}),t})();var Ct=y(3656),xt=y(385);const At=["signatureCanvas"],Ot=["fileInput"];function Lt(a,t){if(1&a){const e=s.RV6();s.j41(0,"ion-col",36)(1,"ion-card"),s.nrm(2,"ion-img",37),s.j41(3,"ion-button",38),s.bIt("click",function(){const i=s.eBV(e).index,r=s.XpG(2);return s.Njj(r.removePhoto(i))}),s.EFF(4," Eliminar "),s.k0s()()()}if(2&a){const e=t.$implicit;s.R7$(2),s.Y8G("src",e.value)}}function kt(a,t){if(1&a&&(s.j41(0,"ion-grid")(1,"ion-row"),s.DNE(2,Lt,5,1,"ion-col",35),s.k0s()()),2&a){const e=s.XpG();s.R7$(2),s.Y8G("ngForOf",e.files.controls)}}const St=[{path:"",component:(()=>{var a;class t{constructor(n,i,r,o,l){this.fb=n,this.formularioService=i,this.tallerLopdgddService=r,this.alertController=o,this.platform=l,this.formImages=[],this.isMobile=this.platform.is("hybrid")}ngOnInit(){this.clienteForm=this.fb.group({nombre:[""],dni:[""],telefono1:["",b.k0.pattern("[0-9]{9}")],telefono2:["",b.k0.pattern("[0-9]{9}")],email:["",[b.k0.email]],domicilio:[""],buen_cliente:["no",b.k0.required],matricula:[""],marca:[""],modelo:[""],km:["",b.k0.pattern("[0-9]*")],conbustible:["",b.k0.pattern("[0-9]*")],trabajos:[""],observaciones:[""],materiales:[""],file:this.fb.array([]),ldp_1:[""],ldp_2:[""],ldp_3:[""],ldp_4:[""],ldp_5:[""],firma:[null],itv:[""]})}ngAfterViewInit(){try{this.signatureCanvas?this.signaturePad=new $(this.signatureCanvas.nativeElement):console.error("Error: signatureCanvas is not defined")}catch(n){console.error("Error initializing SignaturePad:",n)}}listaLopdgdd(){}saveSignature(){const n=this.signaturePad.toDataURL();this.clienteForm.patchValue({firma:n})}clearSignature(){this.signaturePad.clear()}triggerFileInput(){this.isMobile?this.addPhoto():this.fileInput.nativeElement.click()}handleFileInput(n){const i=n.target.files;i&&Array.from(i).forEach(r=>{const o=new FileReader;o.onload=()=>{const l=o.result;this.clienteForm.get("file").push(this.fb.control(l))},o.readAsDataURL(r)})}dataURLToBlob(n){const i=atob(n.split(",")[1]),r=n.split(",")[0].split(":")[1].split(";")[0],o=new ArrayBuffer(i.length),l=new Uint8Array(o);for(let d=0;d<i.length;d++)l[d]=i.charCodeAt(d);return new Blob([o],{type:r})}addPhoto(){var n=this;return(0,u.A)(function*(){console.log(n.isMobile);const i=yield _t.getPhoto({quality:90,resultType:rt.DataUrl,source:M.Prompt});i&&i.dataUrl&&n.formImages.push(i.dataUrl)})()}get files(){return this.clienteForm.get("file")}removePhoto(n){this.files.removeAt(n)}onSubmit(){var n=this;return(0,u.A)(function*(){console.log(n.clienteForm.invalid),!n.clienteForm.invalid&&(n.saveSignature(),console.log("Datos del formulario reactivo:",n.clienteForm.value),n.formularioService.nuevaOrden(n.clienteForm.value).subscribe(function(){var i=(0,u.A)(function*(r){yield(yield n.alertController.create({header:"\xc9xito",message:"Formulario enviado correctamente.",buttons:["OK"]})).present(),console.log(r),n.clienteForm.reset(),n.formImages=[]});return function(r){return i.apply(this,arguments)}}(),function(){var i=(0,u.A)(function*(r){yield(yield n.alertController.create({header:"Error",message:"Ocurri\xf3 un error al enviar el formulario.",buttons:["OK"]})).present(),console.log(r)});return function(r){return i.apply(this,arguments)}}()))})()}}return(a=t).\u0275fac=function(n){return new(n||a)(s.rXU(b.ok),s.rXU(Et),s.rXU(wt),s.rXU(f.hG),s.rXU(Ct.OD))},a.\u0275cmp=s.VBU({type:a,selectors:[["app-nueva-orden"]],viewQuery:function(n,i){if(1&n&&(s.GBs(At,7),s.GBs(Ot,5)),2&n){let r;s.mGM(r=s.lsd())&&(i.signatureCanvas=r.first),s.mGM(r=s.lsd())&&(i.fileInput=r.first)}},decls:85,vars:6,consts:[["fileInput",""],["signatureCanvas",""],["id","main-content"],["enctype","multipart/form-data",3,"ngSubmit","formGroup"],[1,"grupos"],["label","NOMBRE","label-placement","floating","fill","solid","placeholder","NOMBRE","formControlName","nombre"],["label","DNI","label-placement","floating","fill","solid","placeholder","DNI","formControlName","dni"],["label","TEL\xc9FONO #1","label-placement","floating","fill","solid","placeholder","TEL\xc9FONO #1","type","number","formControlName","telefono1"],["label","TEL\xc9FONO #2","label-placement","floating","fill","solid","placeholder","TEL\xc9FONO #2","type","number","formControlName","telefono2"],["label","EMAIL","label-placement","floating","fill","solid","placeholder","EMAIL","type","email","formControlName","email"],["label","DOMICILIO","label-placement","floating","fill","solid","placeholder","DOMICILIO","type","text","formControlName","domicilio"],["label","BUEN CLIENTE","placeholder","SI","formControlName","buen_cliente"],["value","si"],["value","no"],["label","MATRICULA","label-placement","floating","fill","solid","placeholder","MATRICULA","formControlName","matricula"],["label","MARCA","label-placement","floating","fill","solid","placeholder","MARCA","formControlName","marca"],["label","MODELO","label-placement","floating","fill","solid","placeholder","MODELO","formControlName","modelo"],["label","KM","label-placement","floating","fill","solid","placeholder","KM","type","number","formControlName","km"],["aria-label","Range with ticks","formControlName","conbustible",3,"ticks","snaps","min","max"],["slot","label"],["label","TRABAJOS","label-placement","floating","fill","solid","placeholder","TRABAJOS","formControlName","trabajos"],["label","OBSERVACIONES","label-placement","floating","fill","solid","placeholder","OBSERVACIONES","formControlName","observaciones"],["label","MATERIALES","label-placement","floating","fill","solid","placeholder","MATERIALES","formControlName","materiales"],["expand","full","color","primary",3,"click"],["type","file","accept","image/*","multiple","",2,"display","none",3,"change"],[4,"ngIf"],["justify","end","formControlName","ldp_1"],["justify","end","formControlName","ldp_2"],["justify","end","formControlName","ldp_3"],["justify","end","formControlName","ldp_4"],["justify","end","formControlName","ldp_5"],["formGroupName","firma",1,"grupos"],["width","350","height","200",2,"border","1px solid #000"],["color","danger",3,"click"],["expand","block","type","submit"],["size","4",4,"ngFor","ngForOf"],["size","4"],[3,"src"],["color","danger","fill","clear","size","small",3,"click"]],template:function(n,i){if(1&n){const r=s.RV6();s.nrm(0,"app-header"),s.j41(1,"ion-content",2)(2,"form",3),s.bIt("ngSubmit",function(){return s.eBV(r),s.Njj(i.onSubmit())}),s.j41(3,"ion-item-divider")(4,"h3"),s.EFF(5,"CLIENTE"),s.k0s()(),s.j41(6,"div",4),s.nrm(7,"ion-input",5)(8,"ion-input",6)(9,"ion-input",7)(10,"ion-input",8)(11,"ion-input",9)(12,"ion-input",10),s.j41(13,"ion-select",11)(14,"ion-select-option",12),s.EFF(15,"SI"),s.k0s(),s.j41(16,"ion-select-option",13),s.EFF(17,"NO"),s.k0s()()(),s.j41(18,"ion-item-divider")(19,"h3"),s.EFF(20,"VEH\xcdCULO"),s.k0s()(),s.j41(21,"div",4),s.nrm(22,"ion-input",14)(23,"ion-input",15)(24,"ion-input",16)(25,"ion-input",17),s.j41(26,"ion-range",18)(27,"div",19),s.EFF(28,"COMBUSTIBLE"),s.k0s()()(),s.j41(29,"ion-item-divider")(30,"h3"),s.EFF(31,"TRABAJOS A REALIZAR"),s.k0s()(),s.j41(32,"div",4),s.nrm(33,"ion-textarea",20),s.k0s(),s.j41(34,"ion-item-divider")(35,"h3"),s.EFF(36,"OBSERVACIONES"),s.k0s()(),s.j41(37,"div",4),s.nrm(38,"ion-textarea",21),s.k0s(),s.j41(39,"ion-item-divider")(40,"h3"),s.EFF(41,"MATERIALES"),s.k0s()(),s.j41(42,"div",4),s.nrm(43,"ion-textarea",22),s.k0s(),s.j41(44,"ion-item-divider")(45,"h3"),s.EFF(46,"FOTOS"),s.k0s()(),s.j41(47,"ion-button",23),s.bIt("click",function(){s.eBV(r);const l=s.sdS(50);return s.Njj(l.click())}),s.EFF(48," Agregar Foto "),s.k0s(),s.j41(49,"input",24,0),s.bIt("change",function(l){return s.eBV(r),s.Njj(i.handleFileInput(l))}),s.k0s(),s.DNE(51,kt,3,1,"ion-grid",25),s.j41(52,"ion-item-divider")(53,"h3"),s.EFF(54,"TERMINOS"),s.k0s()(),s.j41(55,"div",4)(56,"ion-item")(57,"ion-checkbox",26),s.EFF(58,"ACEPTO LOS T\xc9RMINOS Y CONDICIONES GENERALES"),s.k0s()()(),s.j41(59,"div",4)(60,"ion-item")(61,"ion-checkbox",27),s.EFF(62,"ACEPTO DEJAR MI VEH\xcdCULO EN EL TALLER PARA EVALUACI\xd3N Y REPARACI\xd3N"),s.k0s()()(),s.j41(63,"div",4)(64,"ion-item")(65,"ion-checkbox",28),s.EFF(66,"ACEPTO RECIBIR COMUNICACIONES Y PROMOCIONES"),s.k0s()()(),s.j41(67,"div",4)(68,"ion-item")(69,"ion-checkbox",29),s.EFF(70,"ACEPTO LOS T\xc9RMINOS Y CONDICIONES DEL TALLER PARA REPARACIONES"),s.k0s()()(),s.j41(71,"div",4)(72,"ion-item")(73,"ion-checkbox",30),s.EFF(74,"ACEPTO LA POL\xcdTICA DE PROTECCI\xd3N DE DATOS PERSONALES"),s.k0s()()(),s.j41(75,"ion-item-divider")(76,"h3"),s.EFF(77,"FIRMA DEL CLIENTE"),s.k0s()(),s.j41(78,"div",31),s.nrm(79,"canvas",32,1),s.j41(81,"ion-button",33),s.bIt("click",function(){return s.eBV(r),s.Njj(i.clearSignature())}),s.EFF(82," LIMPIAR FIRMA "),s.k0s()(),s.j41(83,"ion-button",34),s.EFF(84,"GUARDAR"),s.k0s()()()}2&n&&(s.R7$(2),s.Y8G("formGroup",i.clienteForm),s.R7$(24),s.Y8G("ticks",!0)("snaps",!0)("min",0)("max",10),s.R7$(25),s.Y8G("ngIf",i.files.length>0))},dependencies:[H.Sq,H.bT,b.qT,b.BC,b.cb,b.j4,b.JD,b.$R,f.Jm,f.b_,f.eY,f.hU,f.W9,f.lO,f.KW,f.$w,f.uz,f.Dg,f.Ob,f.ln,f.Nm,f.Ip,f.nc,f.hB,f.su,f.Je,f.Gw,xt.l],styles:[".grupos[_ngcontent-%COMP%]{padding:20px}ion-input[_ngcontent-%COMP%], ion-textarea[_ngcontent-%COMP%]{background:#fff;border-radius:7px;border:solid;border-width:thin;border-color:#829abd;margin-bottom:10px}ion-textarea[_ngcontent-%COMP%]{height:150px}.item-inner[_ngcontent-%COMP%]{border-color:transparent!important}canvas[_ngcontent-%COMP%]{background:#fff}"]}),t})()}];let Tt=(()=>{var a;class t{}return(a=t).\u0275fac=function(n){return new(n||a)},a.\u0275mod=s.$C({type:a}),a.\u0275inj=s.G2t({imports:[tt.iI.forChild(St),tt.iI]}),t})();var Ft=y(3887);let Mt=(()=>{var a;class t{}return(a=t).\u0275fac=function(n){return new(n||a)},a.\u0275mod=s.$C({type:a}),a.\u0275inj=s.G2t({imports:[H.MD,b.YN,b.X1,f.bv,Tt,Ft.G]}),t})()}}]);